@model IEnumerable<Gameo.Services.GameStatus>
@{
    ViewBag.Title = "Index";
}
<div class="container">
    @Html.ActionLink("Assign Console", "AssignConsole", "Game", new { @class = "pull-right btn btn-primary" })
    @foreach (var gameStatus in Model)
    {
        <h3>@gameStatus.GamingConsoleName &nbsp;&nbsp;
            @{
                var isConsoleInUse = gameStatus.Players.Any();
                var consoleAvailability = isConsoleInUse ? "In Use" : "Available";
                var consoleStatusLabel = isConsoleInUse ? "label-info" : "label-success";
            }
            <span
                class="label @consoleStatusLabel">
                @consoleAvailability
            </span>
        </h3>
        if (isConsoleInUse)
        {
            <table class="table table-striped">
                <tr>
                    <th>
                        Player Name
                    </th>
                    <th>
                        In Time
                    </th>
                    <th>
                        Out Time
                    </th>
                </tr> 
                @foreach (var player in gameStatus.Players.OrderBy(player => player.OutTime))
                {
                    <tr>
                        <td>@player.CustomerName
                        </td>
                        <td> @player.InTime.ToLongDateString() - @player.InTime.ToShortTimeString()
                        </td>
                        <td> @player.OutTime.ToLongDateString() - @player.OutTime.ToShortTimeString()
                        </td>
                    </tr>
                }
            </table>
        }
    }
</div>

<script type="text/javascript">
    setInterval("window.location.reload()", 300000);
</script>
